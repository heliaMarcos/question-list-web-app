<!DOCTYPE html>
<html ng-app="questionListApp">

<head>
    <meta charset="utf-8">
    <title>Question List App</title>
    <link rel="stylesheet" href="css/style.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.1/angular.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.10/angular-route.min.js"></script>
    <script>
        var questionListApp = angular.module('questionListApp', ['ngRoute']);

        questionListApp.config(function($routeProvider) {
          $routeProvider.
            when('/', {
              templateUrl: 'views/question-list.html',
              controller: 'QuestionCtrl'
            }).
            when('/:questionId', {
              templateUrl: 'views/question-detail.html',
              controller: 'QuestionDetailCtrl'
            }).
            when('share/:questionId', {
              templateUrl: 'views/share.html',
              controller: 'ShareScreenCtrl'
            }).
            otherwise({
              redirectTo: '/'
            });
        });

        questionListApp.factory('questions', function($http){
        return {
          list: function(callback){
            $http.get('questions.json').success(callback);
          },
          find: function(questionId, callback){
            $http.get('questions.json').success(function(data) {
              var index = parseInt(questionId) - 1;
              callback(data[index]);
            });
          }
        };
      });

      questionListApp.controller('QuestionCtrl', function ($scope, questions){
        questions.list(function(questions) {
          $scope.questions = questions;
        });
      });

      questionListApp.controller('QuestionDetailCtrl', function ($scope, $routeParams, questions){
        questions.find($routeParams.questionId, function(item) {
          $scope.item = item;
        });
      });
    </script>
</head>

<body>
    <div class="container" ng-view></div>
</body>

</html>
